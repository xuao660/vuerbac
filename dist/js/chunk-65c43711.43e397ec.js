(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65c43711"],{"0330":function(e,n,t){var i={"./MenuBasic.vue":"2ae3"};function a(e){var n=l(e);return t(n)}function l(e){if(!t.o(i,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=l,e.exports=a,a.id="0330"},"2ae3":function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.globalLoading,expression:"globalLoading"}],attrs:{"element-loading-text":"正在添加...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("div",{staticClass:"MenuTool"},[t("el-input",{attrs:{size:"small",placeholder:"请输入角色英文名"},model:{value:e.role.name,callback:function(n){e.$set(e.role,"name",n)},expression:"role.name"}},[t("template",{slot:"prepend"},[e._v("ROLE_")])],2),t("el-input",{attrs:{size:"small",placeholder:"请输入角色中文名"},model:{value:e.role.nameZh,callback:function(n){e.$set(e.role,"nameZh",n)},expression:"role.nameZh"}}),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.doAddRole}},[e._v("添加角色")])],1),t("div",{staticStyle:{"margin-top":"30px",width:"500px"}},[t("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",accordion:""},on:{change:e.change},model:{value:e.activeName,callback:function(n){e.activeName=n},expression:"activeName"}},e._l(e.roles,(function(n,i){return t("el-collapse-item",{key:i,attrs:{title:n.nameZh,name:n.id}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("菜单资源")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff0000"},attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(t){return e.deleteRole(n)}}})],1),t("div",[t("el-tree",{key:i,ref:"tree",refInFor:!0,attrs:{"show-checkbox":"","node-key":"id","default-checked-keys":e.selectedMenus,data:e.allmenus,props:e.defaultProps}}),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{on:{click:e.cancelUpdate}},[e._v("取消修改")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doUpdate(n.id,i)}}},[e._v("确认修改")])],1)],1)])],1)})),1)],1)])},a=[],l=(t("b0c0"),t("159b"),{name:"MenuBasic",data:function(){return{role:{name:"",nameZh:""},allmenus:[],activeName:-1,selectedMenus:[],roles:[],loading:!1,globalLoading:!1,defaultProps:{children:"children",label:"name"}}},methods:{deleteRole:function(e){var n=this;this.$confirm("此操作将永久删除【"+e.nameZh+"】角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.deleteRequest("/menu/basic/role/"+e.id).then((function(e){e&&n.initRoles()}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},doAddRole:function(){var e=this;this.role.name&&this.role.nameZh?(this.globalLoading=!0,this.postRequest("/menu/basic/role",this.role).then((function(n){e.globalLoading=!1,n&&(e.role.name="",e.role.nameZh="",e.initRoles())}))):this.$message.error("数据不可以为空")},cancelUpdate:function(){this.activeName=-1},doUpdate:function(e,n){var t=this,i=this.$refs.tree[n],a=i.getCheckedKeys(!0),l="/menu/basic/?rid="+e;a.forEach((function(e){l+="&mids="+e})),this.putRequest(l).then((function(e){e&&(t.activeName=-1)}))},initSelectedMenus:function(e){var n=this;this.getRequest("/menu/basic/mids/"+e).then((function(e){e&&(n.selectedMenus=e)}))},change:function(e){e&&(this.initAllMenus(),this.initSelectedMenus(e))},initAllMenus:function(){var e=this;this.getRequest("/menu/basic/menus").then((function(n){n&&(e.allmenus=n)}))},initRoles:function(){var e=this;this.loading=!0,this.getRequest("/menu/basic/").then((function(n){e.loading=!1,n&&(e.roles=n)}))}},mounted:function(){this.initRoles()}}),o=l,s=(t("d5af"),t("2877")),c=Object(s["a"])(o,i,a,!1,null,"1f2297f5",null);n["default"]=c.exports},"99a9":function(e,n,t){},d5af:function(e,n,t){"use strict";t("99a9")}}]);
//# sourceMappingURL=chunk-65c43711.43e397ec.js.map