{"version":3,"sources":["webpack:///./src/views/menu sync ^\\.\\/.*\\.vue$","webpack:///./src/views/menu/MenuBasic.vue?170b","webpack:///src/views/menu/MenuBasic.vue","webpack:///./src/views/menu/MenuBasic.vue?93eb","webpack:///./src/views/menu/MenuBasic.vue","webpack:///./src/views/menu/MenuBasic.vue?529f"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","staticClass","model","role","callback","$$v","$set","slot","_v","on","doAddRole","staticStyle","change","activeName","_l","r","index","key","nameZh","$event","deleteRole","ref","refInFor","selectedMenus","allmenus","defaultProps","cancelUpdate","doUpdate","staticRenderFns","data","roles","loading","globalLoading","children","label","methods","$confirm","confirmButtonText","cancelButtonText","type","resp","message","postRequest","then","$message","error","selectedKeys","forEach","url","putRequest","initSelectedMenus","getRequest","rid","initAllMenus","initRoles","mounted","component"],"mappings":"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","file":"js/chunk-65c43711.43e397ec.js","sourcesContent":["var map = {\n\t\"./MenuBasic.vue\": \"2ae3\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"0330\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.globalLoading),expression:\"globalLoading\"}],attrs:{\"element-loading-text\":\"正在添加...\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\"}},[_c('div',{staticClass:\"MenuTool\"},[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"请输入角色英文名\"},model:{value:(_vm.role.name),callback:function ($$v) {_vm.$set(_vm.role, \"name\", $$v)},expression:\"role.name\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"ROLE_\")])],2),_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"请输入角色中文名\"},model:{value:(_vm.role.nameZh),callback:function ($$v) {_vm.$set(_vm.role, \"nameZh\", $$v)},expression:\"role.nameZh\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.doAddRole}},[_vm._v(\"添加角色\")])],1),_c('div',{staticStyle:{\"margin-top\":\"30px\",\"width\":\"500px\"}},[_c('el-collapse',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"element-loading-text\":\"正在加载...\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\",\"accordion\":\"\"},on:{\"change\":_vm.change},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},_vm._l((_vm.roles),function(r,index){return _c('el-collapse-item',{key:index,attrs:{\"title\":r.nameZh,\"name\":r.id}},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"菜单资源\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\",\"color\":\"#ff0000\"},attrs:{\"icon\":\"el-icon-delete\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteRole(r)}}})],1),_c('div',[_c('el-tree',{key:index,ref:\"tree\",refInFor:true,attrs:{\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.selectedMenus,\"data\":_vm.allmenus,\"props\":_vm.defaultProps}}),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-end\"}},[_c('el-button',{on:{\"click\":_vm.cancelUpdate}},[_vm._v(\"取消修改\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.doUpdate(r.id,index)}}},[_vm._v(\"确认修改\")])],1)],1)])],1)}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div   v-loading=\"globalLoading\"\r\n         element-loading-text=\"正在添加...\"\r\n         element-loading-spinner=\"el-icon-loading\"\r\n         element-loading-background=\"rgba(0, 0, 0, 0.8)\">\r\n    <div class=\"MenuTool\">\r\n      <el-input size=\"small\" placeholder=\"请输入角色英文名\" v-model=\"role.name\">\r\n        <template slot=\"prepend\">ROLE_</template>\r\n      </el-input>\r\n      <el-input size=\"small\" placeholder=\"请输入角色中文名\" v-model=\"role.nameZh\"></el-input>\r\n      <el-button type=\"primary\" size=\"small\" icon=\"el-icon-plus\" @click=\"doAddRole\">添加角色</el-button>\r\n    </div>\r\n    <div  style=\"margin-top: 30px;width: 500px\">\r\n      <el-collapse  v-model=\"activeName\"\r\n                    v-loading=\"loading\"\r\n                    element-loading-text=\"正在加载...\"\r\n                    element-loading-spinner=\"el-icon-loading\"\r\n                    element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n                    accordion @change=\"change\">\r\n        <el-collapse-item  :title=\"r.nameZh\" :name=\"r.id\" v-for=\"(r,index) in roles\" :key=\"index\">\r\n          <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n              <span>菜单资源</span>\r\n              <el-button style=\"float: right; padding: 3px 0;color: #ff0000;\" icon=\"el-icon-delete\" @click=\"deleteRole(r)\" type=\"text\"></el-button>\r\n            </div>\r\n            <div >\r\n              <el-tree\r\n                  show-checkbox\r\n                  node-key=\"id\"\r\n                  ref=\"tree\"\r\n                  :key=\"index\"\r\n                  :default-checked-keys=\"selectedMenus\"\r\n                  :data=\"allmenus\" :props=\"defaultProps\"></el-tree>\r\n              <div style=\"display: flex;justify-content: flex-end\">\r\n                <el-button @click=\"cancelUpdate\">取消修改</el-button>\r\n                <el-button type=\"primary\" @click=\"doUpdate(r.id,index)\">确认修改</el-button>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  name: \"MenuBasic\",\r\n  data() {\r\n    return {\r\n      role: {\r\n        name: '',\r\n        nameZh: ''\r\n      },\r\n      allmenus: [],\r\n      activeName: -1,\r\n      selectedMenus: [],\r\n      roles: [],\r\n      loading: false,\r\n      globalLoading: false,\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'name'\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    deleteRole(role) {\r\n      this.$confirm('此操作将永久删除【' + role.nameZh + '】角色, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.deleteRequest(\"/menu/basic/role/\" + role.id).then(resp => {\r\n          if (resp) {\r\n            this.initRoles();\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n    doAddRole() {\r\n      if (this.role.name && this.role.nameZh) {\r\n        this.globalLoading = true;\r\n        this.postRequest(\"/menu/basic/role\", this.role).then(resp => {\r\n          this.globalLoading = false;\r\n          if (resp) {\r\n            this.role.name = '';\r\n            this.role.nameZh = '';\r\n            this.initRoles();\r\n          }\r\n        })\r\n      } else {\r\n        this.$message.error('数据不可以为空');\r\n      }\r\n    },\r\n    cancelUpdate() {\r\n      this.activeName = -1;\r\n    },\r\n    doUpdate(rid, index) {\r\n      let tree = this.$refs.tree[index];\r\n      let selectedKeys = tree.getCheckedKeys(true);\r\n      let url = '/menu/basic/?rid=' + rid;\r\n      selectedKeys.forEach(key => {\r\n        url += '&mids=' + key;\r\n      })\r\n      this.putRequest(url).then(resp => {\r\n        if (resp) {\r\n          this.activeName = -1;\r\n        }\r\n      })\r\n    },\r\n    initSelectedMenus(rid) {\r\n      this.getRequest(\"/menu/basic/mids/\" + rid).then(resp => {\r\n        if (resp) {\r\n          this.selectedMenus = resp;\r\n        }\r\n      })\r\n    },\r\n    change(rid) {\r\n      if (rid) {\r\n        this.initAllMenus();\r\n        this.initSelectedMenus(rid);\r\n      }\r\n    },\r\n    initAllMenus() {\r\n      this.getRequest(\"/menu/basic/menus\").then(resp => {\r\n        if (resp) {\r\n          this.allmenus = resp;\r\n        }\r\n      })\r\n    },\r\n    initRoles(){\r\n      this.loading = true;\r\n      this.getRequest(\"/menu/basic/\").then(resp => {\r\n        this.loading = false;\r\n        if (resp) {\r\n          this.roles = resp;\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initRoles();\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .MenuTool {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    margin-top: 40px;\r\n  }\r\n\r\n  .MenuTool .el-input {\r\n    width: 300px;\r\n    margin-right: 6px;\r\n  }\r\n\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBasic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBasic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MenuBasic.vue?vue&type=template&id=1f2297f5&scoped=true&\"\nimport script from \"./MenuBasic.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBasic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuBasic.vue?vue&type=style&index=0&id=1f2297f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f2297f5\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBasic.vue?vue&type=style&index=0&id=1f2297f5&scoped=true&lang=css&\""],"sourceRoot":""}